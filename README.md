# Easy Matrix Server Installer üöÄ

![GitHub license](https://img.shields.io/github/license/Glebshir/easy-matrix-server)
![Bash](https://img.shields.io/badge/language-bash-blue)

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç** –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä Matrix (Synapse) –Ω–∞ —á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ Ubuntu –∏–ª–∏ Debian.

–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Å—Ç–Ω–æ–≥–æ, –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –¥–ª—è —Å–µ–º—å–∏, –¥—Ä—É–∑–µ–π –∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **Matrix Synapse:** –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π.
- **PostgreSQL:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–≤–º–µ—Å—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ–π SQLite).
- **Nginx:** –í–µ–±-—Å–µ—Ä–≤–µ—Ä –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏.
- **Let's Encrypt:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (HTTPS).
- **Coturn:** TURN-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∞—É–¥–∏–æ- –∏ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –¥–∞–∂–µ –∑–∞ NAT.
- **Firewall:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `ufw` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1.  **–ß–∏—Å—Ç—ã–π —Å–µ—Ä–≤–µ—Ä (VPS)** —Å **Ubuntu 20.04/22.04** –∏–ª–∏ **Debian 11/12**.
    *   *–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 2 GB RAM, 1 CPU.*
2.  **–î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è**, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.
3.  –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –ø—Ä–∞–≤–∞–º–∏ `root`.

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS (–î–æ –Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º –∏ —Å–æ–∑–¥–∞–π—Ç–µ 2 –∑–∞–ø–∏—Å–∏:

1.  **A-–∑–∞–ø–∏—Å—å** (–û—Å–Ω–æ–≤–Ω–∞—è):
    - **–¢–∏–ø:** `A`
    - **–ò–º—è:** `@` (–∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω)
    - **–ó–Ω–∞—á–µ–Ω–∏–µ:** IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

2.  **SRV-–∑–∞–ø–∏—Å—å** (–î–ª—è –∑–≤–æ–Ω–∫–æ–≤ –∏ —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏):
    - **–¢–∏–ø:** `SRV`
    - **Service:** `_matrix`
    - **Protocol:** `_tcp`
    - **Port:** `8448`
    - **Priority:** `10` | **Weight:** `0`
    - **Target:** `@` (–∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω)

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1. –°–∫–∞—á–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∫—Ä–∏–ø—Ç

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Glebshir/easy-matrix-server.git
cd easy-matrix-server

2. –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
nano install_matrix.sh

### –®–∞–≥ 2. –í–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ

–í —Å–∞–º–æ–º –≤–µ—Ä—Ö—É —Ñ–∞–π–ª–∞ –∏–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —Å–≤–æ–∏:

DOMAIN="your-site.com" # –í–∞—à –¥–æ–º–µ–Ω
EMAIL="admin@your-site.com" # –ü–æ—á—Ç–∞ –¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
WHITELIST_DOMAINS=("friend.com") # (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–º–µ–Ω—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –æ–±—â–µ–Ω–∏–µ

*(–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ nano –Ω–∞–∂–º–∏—Ç–µ `Ctrl+O`, `Enter`, –∑–∞—Ç–µ–º `Ctrl+X`)*

### –®–∞–≥ 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É

bash install_matrix.sh

üç∫ **–ì–æ—Ç–æ–≤–æ!** –°–∫—Ä–∏–ø—Ç —Å–¥–µ–ª–∞–µ—Ç –≤—Å—ë —Å–∞–º –∑–∞ 5-10 –º–∏–Ω—É—Ç.

---

## üõ†Ô∏è –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞).

1.  **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É** (–µ—ë —Ç–∞–∫–∂–µ –ø–æ–∫–∞–∂–µ—Ç —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω—Ü–µ):
    ```
    register_new_matrix_user -c /etc/matrix-synapse/homeserver.yaml http://localhost:8008
    ```

2.  **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:**
    *   `User ID`: –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `admin`).
    *   `Password`: –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å.
    *   `Make admin?`: **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–ø–∏—à–∏—Ç–µ `yes`**.

3.  **–í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
    *   –°–∫–∞—á–∞–π—Ç–µ [Element](https://element.io/download) (iOS/Android/Desktop).
    *   –ù–∞–∂–º–∏—Ç–µ **"–í—ã–±—Ä–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"** (Custom Server).
    *   –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å: `https://your-site.com`.
    *   –í–æ–π–¥–∏—Ç–µ —Å –Ω–æ–≤—ã–º –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º.

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](LICENSE). –í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —ç—Ç–æ—Ç –∫–æ–¥.
